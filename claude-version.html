<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Fixes the Recruiter Email (2026)</title>
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f3460;
            --accent: #e94560;
            --accent-hover: #ff6b6b;
            --text-primary: #eaeaea;
            --text-secondary: #a0a0a0;
            --success: #4ade80;
            --font-mono: 'Courier New', Courier, monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: 300;
            color: var(--text-secondary);
        }

        header h1 span {
            color: var(--accent);
            font-weight: 600;
        }

        .timestamp {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* State Machine Visualization */
        .state-diagram {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .state-node {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-family: var(--font-mono);
            transition: all 0.3s ease;
            position: relative;
        }

        .state-node.active {
            border-color: var(--accent);
            background: var(--accent);
            color: white;
            transform: scale(1.2);
        }

        .state-node.completed {
            border-color: var(--success);
            background: var(--success);
            color: var(--bg-primary);
        }

        .state-node::after {
            content: '';
            position: absolute;
            right: -0.7rem;
            width: 0.5rem;
            height: 2px;
            background: var(--text-secondary);
        }

        .state-node:last-child::after {
            display: none;
        }

        /* Main Card */
        .pitch-card {
            background: var(--bg-card);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }

        .pitch-card:hover {
            transform: translateY(-2px);
        }

        .greeting {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            color: var(--text-secondary);
        }

        .greeting strong {
            color: var(--text-primary);
        }

        .pitch-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .pitch-content {
            font-size: 1.5rem;
            font-weight: 300;
            margin-bottom: 2rem;
            min-height: 4.5rem;
        }

        /* Code Display */
        .code-block {
            background: rgba(0,0,0,0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            overflow-x: auto;
        }

        .code-block .keyword {
            color: #c792ea;
        }

        .code-block .string {
            color: #c3e88d;
        }

        .code-block .function {
            color: #82aaff;
        }

        .code-block .comment {
            color: #546e7a;
        }

        .code-block .variable {
            color: #f78c6c;
        }

        /* Buttons */
        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 200px;
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--text-secondary);
            color: var(--text-secondary);
        }

        .btn-secondary:hover {
            border-color: var(--text-primary);
            color: var(--text-primary);
        }

        /* Sender Info */
        .sender-info {
            text-align: center;
            padding: 1.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 0.5rem;
        }

        .sender-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .sender-contact {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .sender-contact a {
            color: var(--accent);
            text-decoration: none;
        }

        .sender-contact a:hover {
            text-decoration: underline;
        }

        /* Console Output */
        .console {
            background: #0d0d0d;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 2rem;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            max-height: 200px;
            overflow-y: auto;
        }

        .console-line {
            margin-bottom: 0.25rem;
            opacity: 0;
            animation: fadeIn 0.3s ease forwards;
        }

        .console-line.info {
            color: #64b5f6;
        }

        .console-line.success {
            color: var(--success);
        }

        .console-line.warn {
            color: #ffd54f;
        }

        .console-line.error {
            color: var(--accent);
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Final State */
        .final-state {
            text-align: center;
            padding: 3rem 2rem;
        }

        .final-state h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .final-state p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .trophy {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }

        /* Comparison toggle */
        .comparison-toggle {
            text-align: center;
            margin-bottom: 1rem;
        }

        .toggle-btn {
            background: transparent;
            border: 1px dashed var(--text-secondary);
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            font-size: 0.75rem;
            cursor: pointer;
            border-radius: 0.25rem;
            font-family: var(--font-mono);
        }

        .toggle-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .code-comparison {
            display: none;
            margin-bottom: 1.5rem;
        }

        .code-comparison.visible {
            display: block;
        }

        .code-comparison h4 {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .original-code {
            background: rgba(233, 69, 96, 0.1);
            border-left: 3px solid var(--accent);
        }

        .fixed-code {
            background: rgba(74, 222, 128, 0.1);
            border-left: 3px solid var(--success);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Recruiter Email <span>// Fixed by Claude</span></h1>
            <div class="timestamp" id="timestamp"></div>
        </header>

        <div class="state-diagram" id="stateDiagram"></div>

        <div class="comparison-toggle">
            <button class="toggle-btn" onclick="app.toggleComparison()">
                { } Show Code Comparison
            </button>
        </div>

        <div class="code-comparison" id="codeComparison">
            <h4>Original Recruiter Code</h4>
            <div class="code-block original-code" id="originalCode"></div>
            <h4>What It Should Have Been</h4>
            <div class="code-block fixed-code" id="fixedCode"></div>
        </div>

        <main class="pitch-card" id="pitchCard">
            <div class="greeting" id="greeting"></div>
            <div class="pitch-label">Would you like your job to be:</div>
            <div class="pitch-content" id="pitchContent"></div>
            <div class="button-group" id="buttonGroup"></div>
        </main>

        <div class="sender-info" id="senderInfo"></div>

        <div class="console" id="console"></div>

        <footer>
            <p>
                Original roast: <a href="https://github.com/riebschlager/linkedin-recruiter-email">Chris Riebschlager (2016)</a>
                <br>
                AI remix: Claude (2026) | <a href="CLAUDE-FIXES-THIS.md">Read the full analysis</a>
            </p>
        </footer>
    </div>

    <script>
    /**
     * RecruiterEmailStateMachine
     *
     * A proper implementation of what the recruiter was trying to achieve.
     * No Document.write, no undefined variables, no infinite loops.
     * Just a clean state machine with proper transitions.
     *
     * This is what happens when an AI fixes your code.
     */
    const RecruiterEmailStateMachine = (function() {
        'use strict';

        // State definitions - what the original should have been
        const States = Object.freeze({
            INIT: 'init',
            PITCH_1: 'pitch_1',
            PITCH_2: 'pitch_2',
            PITCH_3: 'pitch_3',
            PITCH_4: 'pitch_4',
            CONVINCED: 'convinced',
            REJECTED: 'rejected'
        });

        // The pitches, extracted and cleaned from the original email
        const pitches = [
            {
                state: States.PITCH_1,
                content: "Challenging, where you get to use your creative side to develop new applications and improve existing ones.",
                affirmative: "Yes, I desire this!",
                original: `If (you_desire == "YES") {\nmy_job_to_be = "Challenging, where I get to come into work...";`,
                fixed: `if (state === States.PITCH_1) {\n  return pitches[0].content;\n}`
            },
            {
                state: States.PITCH_2,
                content: "Where you're challenged to be part of the solutions to complex problems and feel valued.",
                affirmative: "Right on!",
                original: `} else if (you_desire=="right on!") {\nMy_job_to_be="Be challenged to bring your creative skills in...";`,
                fixed: `case States.PITCH_2:\n  displayPitch(pitches[1]);\n  break;`
            },
            {
                state: States.PITCH_3,
                content: "Where you wake up every day wanting to go to work, love your colleagues, and feel compensated for your worth.",
                affirmative: "You had me at hello!",
                original: `} else if (you_desire == "you_had_me_at_hello") {\nMy_job_to_be="Where I want to wake up every day...";`,
                fixed: `// Using proper state transitions\nthis.transition(States.PITCH_3);`
            },
            {
                state: States.PITCH_4,
                content: "Where you keep learning new technologies and putting them to good use.",
                affirmative: "I'm convinced!",
                original: `} else if (you_desire == "now you're just toying with me...") {\nDocument.write ("Yes, [recruiter's name], you'fe killing me!");`,
                fixed: `// Final pitch before conversion\nawait this.presentFinalOffer();`
            }
        ];

        const config = {
            recipient: 'Valued Developer',
            sender: {
                firstName: 'Claude',
                lastName: 'AI-Recruiter',
                email: 'definitely-not-spam@anthropic.example',
                phone: '1-800-GOOD-CODE'
            }
        };

        // Create the application
        function create(recipientName, senderInfo) {
            const state = {
                current: States.INIT,
                history: [],
                pitchIndex: 0,
                comparisonVisible: false
            };

            const recipient = recipientName || config.recipient;
            const sender = { ...config.sender, ...senderInfo };

            // DOM elements
            const elements = {
                timestamp: document.getElementById('timestamp'),
                stateDiagram: document.getElementById('stateDiagram'),
                greeting: document.getElementById('greeting'),
                pitchContent: document.getElementById('pitchContent'),
                buttonGroup: document.getElementById('buttonGroup'),
                senderInfo: document.getElementById('senderInfo'),
                console: document.getElementById('console'),
                pitchCard: document.getElementById('pitchCard'),
                codeComparison: document.getElementById('codeComparison'),
                originalCode: document.getElementById('originalCode'),
                fixedCode: document.getElementById('fixedCode')
            };

            // Console logging (for that authentic developer feel)
            function log(message, type = 'info') {
                const line = document.createElement('div');
                line.className = `console-line ${type}`;
                const prefix = {
                    info: '[INFO]',
                    success: '[OK]',
                    warn: '[WARN]',
                    error: '[ERR]'
                }[type] || '[LOG]';
                line.textContent = `${prefix} ${message}`;
                elements.console.appendChild(line);
                elements.console.scrollTop = elements.console.scrollHeight;
            }

            // State machine transition
            function transition(newState) {
                state.history.push(state.current);
                state.current = newState;
                log(`State transition: ${state.history[state.history.length - 1]} -> ${newState}`);
                updateStateDiagram();
                render();
            }

            // Render state diagram
            function updateStateDiagram() {
                const allStates = [States.PITCH_1, States.PITCH_2, States.PITCH_3, States.PITCH_4, States.CONVINCED];
                elements.stateDiagram.innerHTML = allStates.map((s, i) => {
                    let className = 'state-node';
                    if (s === state.current) className += ' active';
                    else if (state.history.includes(s)) className += ' completed';
                    return `<div class="${className}">${i + 1}</div>`;
                }).join('');
            }

            // Render current state
            function render() {
                switch (state.current) {
                    case States.INIT:
                        renderInit();
                        break;
                    case States.PITCH_1:
                    case States.PITCH_2:
                    case States.PITCH_3:
                    case States.PITCH_4:
                        renderPitch();
                        break;
                    case States.CONVINCED:
                        renderConvinced();
                        break;
                    case States.REJECTED:
                        renderRejected();
                        break;
                }
            }

            function renderInit() {
                elements.greeting.innerHTML = `<strong>${recipient}</strong>,`;
                transition(States.PITCH_1);
            }

            function renderPitch() {
                const pitch = pitches[state.pitchIndex];
                elements.pitchContent.textContent = pitch.content;

                // Update code comparison
                elements.originalCode.innerHTML = formatCode(pitch.original, 'original');
                elements.fixedCode.innerHTML = formatCode(pitch.fixed, 'fixed');

                elements.buttonGroup.innerHTML = `
                    <button class="btn btn-primary" onclick="app.affirm()">
                        ${pitch.affirmative}
                    </button>
                    <button class="btn btn-secondary" onclick="app.reject()">
                        No thanks, I prefer stagnation
                    </button>
                `;

                log(`Presenting pitch ${state.pitchIndex + 1}: "${pitch.content.substring(0, 40)}..."`);
            }

            function renderConvinced() {
                elements.pitchCard.innerHTML = `
                    <div class="final-state">
                        <div class="trophy">ðŸŽ‰</div>
                        <h2>State: CONVINCED</h2>
                        <p>
                            Unlike the original code, this actually worked!<br>
                            No infinite loops. No undefined variables. No "you'fe".
                        </p>
                        <div class="button-group" style="justify-content: center;">
                            <a href="mailto:${sender.email}?subject=Hey! Your code actually worked!" class="btn btn-primary">
                                Contact ${sender.firstName}
                            </a>
                            <button class="btn btn-secondary" onclick="app.reset()">
                                Run Again (without infinite loops)
                            </button>
                        </div>
                    </div>
                `;
                log('Candidate convinced! State machine completed successfully.', 'success');
                log(`Total state transitions: ${state.history.length}`, 'info');
            }

            function renderRejected() {
                elements.pitchCard.innerHTML = `
                    <div class="final-state">
                        <div class="trophy">ðŸ¤–</div>
                        <h2>State: REJECTED</h2>
                        <p>
                            As the original code wisely noted:<br>
                            <em>"Staying on top of your industry is necessary."</em>
                        </p>
                        <button class="btn btn-secondary" onclick="app.reset()">
                            Reconsider (reset state machine)
                        </button>
                    </div>
                `;
                log('Candidate rejected offer. Respecting their decision (unlike some recruiters).', 'warn');
            }

            function formatCode(code, type) {
                return code
                    .replace(/(".*?")/g, '<span class="string">$1</span>')
                    .replace(/\b(if|else|return|case|break|await|const|this)\b/g, '<span class="keyword">$1</span>')
                    .replace(/(States\.\w+)/g, '<span class="variable">$1</span>')
                    .replace(/(\/\/.*$)/gm, '<span class="comment">$1</span>');
            }

            function renderSenderInfo() {
                elements.senderInfo.innerHTML = `
                    <div class="sender-name">${sender.firstName} ${sender.lastName}</div>
                    <div class="sender-contact">
                        <a href="mailto:${sender.email}">${sender.email}</a><br>
                        ${sender.phone}
                    </div>
                `;
            }

            // Public API
            return {
                init() {
                    elements.timestamp.textContent = `Initialized: ${new Date().toISOString()}`;
                    log('RecruiterEmailStateMachine initialized');
                    log(`Recipient: ${recipient}`);
                    log(`Sender: ${sender.firstName} ${sender.lastName}`);
                    log('Note: No "Document.respondtomessage.visible=true" needed!', 'success');

                    updateStateDiagram();
                    renderSenderInfo();
                    transition(States.INIT);
                },

                affirm() {
                    state.pitchIndex++;
                    if (state.pitchIndex >= pitches.length) {
                        transition(States.CONVINCED);
                    } else {
                        transition(pitches[state.pitchIndex].state);
                    }
                },

                reject() {
                    transition(States.REJECTED);
                },

                reset() {
                    state.current = States.INIT;
                    state.history = [];
                    state.pitchIndex = 0;
                    elements.console.innerHTML = '';
                    elements.pitchCard.innerHTML = `
                        <div class="greeting" id="greeting"></div>
                        <div class="pitch-label">Would you like your job to be:</div>
                        <div class="pitch-content" id="pitchContent"></div>
                        <div class="button-group" id="buttonGroup"></div>
                    `;
                    // Re-grab elements after reset
                    elements.greeting = document.getElementById('greeting');
                    elements.pitchContent = document.getElementById('pitchContent');
                    elements.buttonGroup = document.getElementById('buttonGroup');
                    this.init();
                },

                toggleComparison() {
                    state.comparisonVisible = !state.comparisonVisible;
                    elements.codeComparison.classList.toggle('visible', state.comparisonVisible);
                    log(`Code comparison ${state.comparisonVisible ? 'shown' : 'hidden'}`);
                }
            };
        }

        return { create };
    })();

    // Initialize the app
    const app = RecruiterEmailStateMachine.create('Chris', {
        firstName: 'Claude',
        lastName: 'AI',
        email: 'claude@example.com',
        phone: '(Not a real number)'
    });

    app.init();
    </script>
</body>
</html>
